<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”ì´í”Œ ìŒ€ë¨¹ ê°€ê³„ë¶€ - ìŒ€ë¨¹ì •ë¦¬</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/animations.css">
    <style>
        body {
            background: #f5f5f5;
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
        }
        
        .header {
            background: linear-gradient(135deg, #F0FFF0 0%, #FFF8DC 100%);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .main-container {
            max-width: 1400px;
            margin: 20px auto;
            padding: 0 20px;
        }
        
        /* ìƒë‹¨ ì°¨íŠ¸ ì„¹ì…˜ */
        .chart-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        /* ê¸°ê°„ ì„ íƒ íƒ­ */
        .period-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .period-tab {
            padding: 10px 25px;
            background: #f8f9fa;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: #333;
        }
        
        .period-tab.active {
            background: #4169E1;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(65, 105, 225, 0.3);
        }
        
        /* ì°¨íŠ¸ ê·¸ë¦¬ë“œ */
        .charts-grid {
            display: grid;
            grid-template-columns: 300px 300px 1fr;
            gap: 20px;
            align-items: center;
        }
        
        .pie-chart-container {
            width: 280px;
            height: 280px;
            margin: 0 auto;
        }
        
        .bar-charts-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            height: 280px;
        }
        
        .bar-chart-wrapper {
            flex: 1;
            position: relative;
        }
        
        /* í•˜ë‹¨ ê·¸ë¦¬ë“œ */
        .bottom-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        /* ìº˜ë¦°ë” ì„¹ì…˜ */
        .calendar-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-header {
            text-align: center;
            font-weight: bold;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }
        
        .calendar-day:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .calendar-day.has-data {
            background: #e8f5e9;
            border: 1px solid #c8e6c9;
        }
        
        .calendar-day .date {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .calendar-day .income {
            color: #228B22;
            font-size: 0.75em;
            font-weight: bold;
        }
        
        .calendar-day .expense {
            color: #DC143C;
            font-size: 0.75em;
            font-weight: bold;
        }
        
        /* ìƒì„¸ ê¸°ë¡ ì„¹ì…˜ */
        .records-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-height: 600px;
            display: flex;
            flex-direction: column;
        }
        
        .records-list {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        .records-list::-webkit-scrollbar {
            width: 8px;
        }
        
        .records-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .records-list::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        .records-list::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .month-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .month-navigation button {
            background: #4169E1;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .month-navigation button:hover {
            background: #3151b1;
            transform: translateY(-2px);
        }
        
        .day-record {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .day-record:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .record-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .record-item:last-child {
            border-bottom: none;
        }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto auto;
            }
            
            .bar-charts-container {
                grid-column: span 2;
            }
        }
        
        @media (max-width: 768px) {
            .bottom-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ„ ë©”ì´í”Œ ìŒ€ë¨¹ ê°€ê³„ë¶€ - ìŒ€ë¨¹ì •ë¦¬ ğŸ„</h1>
        <div class="nav-menu">
            <a href="index.html" class="nav-link">í™ˆ</a>
            <a href="records.html" class="nav-link active">ìŒ€ë¨¹ì •ë¦¬</a>
        </div>
    </div>
    
    <div class="main-container">
        <!-- ìƒë‹¨ ì°¨íŠ¸ ì„¹ì…˜ -->
        <div class="chart-section">
            <h2>ğŸ“Š ìˆ˜ìµ/ì§€ì¶œ ë¶„ì„</h2>
            
            <!-- ê¸°ê°„ ì„ íƒ íƒ­ -->
            <div class="period-tabs">
                <button class="period-tab active" data-period="weekly">ì£¼ê°„</button>
                <button class="period-tab" data-period="monthly">ì›”ê°„</button>
                <button class="period-tab" data-period="yearly">ì—°ê°„</button>
            </div>
            
            <!-- ì°¨íŠ¸ ê·¸ë¦¬ë“œ -->
            <div class="charts-grid">
                <!-- ìˆ˜ìµ ì›í˜• ì°¨íŠ¸ -->
                <div class="pie-chart-container">
                    <canvas id="incomePieChart"></canvas>
                </div>
                
                <!-- ì§€ì¶œ ì›í˜• ì°¨íŠ¸ -->
                <div class="pie-chart-container">
                    <canvas id="expensePieChart"></canvas>
                </div>
                
                <!-- ì¹´í…Œê³ ë¦¬ë³„ ë§‰ëŒ€ ê·¸ë˜í”„ -->
                <div class="bar-charts-container">
                    <div class="bar-chart-wrapper">
                        <canvas id="incomeBarChart"></canvas>
                    </div>
                    <div class="bar-chart-wrapper">
                        <canvas id="expenseBarChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- í•˜ë‹¨ ê·¸ë¦¬ë“œ -->
        <div class="bottom-grid">
            <!-- ìº˜ë¦°ë” ì„¹ì…˜ -->
            <div class="calendar-section">
                <h2>ğŸ“… ìº˜ë¦°ë”</h2>
                
                <div class="month-navigation">
                    <button onclick="changeMonth(-1)">â—€ ì´ì „</button>
                    <h3 id="currentMonth"></h3>
                    <button onclick="changeMonth(1)">ë‹¤ìŒ â–¶</button>
                </div>
                
                <div class="calendar" id="calendar">
                    <!-- ìº˜ë¦°ë”ê°€ ì—¬ê¸° ìƒì„±ë¨ -->
                </div>
            </div>
            
            <!-- ìƒì„¸ ê¸°ë¡ ì„¹ì…˜ -->
            <div class="records-section">
                <h2>ğŸ“‹ ìƒì„¸ ê¸°ë¡</h2>
                <div class="records-list" id="recordsList">
                    <!-- ê¸°ë¡ ëª©ë¡ì´ ì—¬ê¸° í‘œì‹œë¨ -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ì „ì—­ ë³€ìˆ˜
        let data = { records: [], goals: [], settings: {} };
        let currentMonth = new Date();
        let currentPeriod = 'weekly';
        let charts = {};
        
        // ì´ˆê¸°í™”
        function init() {
            loadData();
            // Chart.js ë¡œë“œ í™•ì¸ í›„ ì°¨íŠ¸ ì´ˆê¸°í™”
            if (typeof Chart !== 'undefined') {
                initializeCharts();
                updateAllCharts();
            } else {
                console.error('Chart.jsê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
            updateCalendar();
            updateRecordsList();
            
            // ê¸°ê°„ íƒ­ ì´ë²¤íŠ¸
            document.querySelectorAll('.period-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    currentPeriod = this.getAttribute('data-period');
                    document.querySelectorAll('.period-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    updateAllCharts();
                });
            });
        }
        
        // ë°ì´í„° ë¡œë“œ
        function loadData() {
            const savedData = sessionStorage.getItem('mapleSsalMeokData');
            if (savedData) {
                data = JSON.parse(savedData);
            } else {
                const localData = localStorage.getItem('mapleSsalMeokData');
                if (localData) {
                    const parsed = JSON.parse(localData);
                    data = {
                        records: parsed.records || [],
                        goals: parsed.goals || [],
                        settings: parsed.settings || {}
                    };
                }
            }
        }
        
        // ì°¨íŠ¸ ì´ˆê¸°í™”
        function initializeCharts() {
            // ìˆ˜ìµ ì›í˜• ì°¨íŠ¸
            const incomeCtx = document.getElementById('incomePieChart').getContext('2d');
            charts.incomePie = new Chart(incomeCtx, {
                type: 'doughnut',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: [
                            '#228B22', '#32CD32', '#90EE90', '#98FB98', '#00FA9A'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        title: {
                            display: true,
                            text: 'ìˆ˜ìµ ë¶„í¬',
                            font: {
                                size: 16
                            }
                        }
                    },
                    animation: {
                        animateRotate: true,
                        animateScale: false
                    }
                }
            });
            
            // ì§€ì¶œ ì›í˜• ì°¨íŠ¸
            const expenseCtx = document.getElementById('expensePieChart').getContext('2d');
            charts.expensePie = new Chart(expenseCtx, {
                type: 'doughnut',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: [
                            '#DC143C', '#FF6347', '#FF7F50', '#FFA07A', '#F08080'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        title: {
                            display: true,
                            text: 'ì§€ì¶œ ë¶„í¬',
                            font: {
                                size: 16
                            }
                        }
                    },
                    animation: {
                        animateRotate: true,
                        animateScale: false
                    }
                }
            });
            
            // ìˆ˜ìµ ë§‰ëŒ€ ì°¨íŠ¸
            const incomeBarCtx = document.getElementById('incomeBarChart').getContext('2d');
            charts.incomeBar = new Chart(incomeBarCtx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'ìˆ˜ìµ',
                        data: [],
                        backgroundColor: '#228B22',
                        borderColor: '#1a6b1a',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatMeso(value);
                                }
                            }
                        }
                    },
                    animation: {
                        duration: 750,
                        easing: 'easeInOutQuart'
                    }
                }
            });
            
            // ì§€ì¶œ ë§‰ëŒ€ ì°¨íŠ¸
            const expenseBarCtx = document.getElementById('expenseBarChart').getContext('2d');
            charts.expenseBar = new Chart(expenseBarCtx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'ì§€ì¶œ',
                        data: [],
                        backgroundColor: '#DC143C',
                        borderColor: '#b91c3c',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatMeso(value);
                                }
                            }
                        }
                    },
                    animation: {
                        duration: 750,
                        easing: 'easeInOutQuart'
                    }
                }
            });
        }
        
        // ëª¨ë“  ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function updateAllCharts() {
            const filteredRecords = filterRecordsByPeriod(data.records, currentPeriod);
            
            // ìˆ˜ìµ ë°ì´í„° ì§‘ê³„
            const incomeData = {};
            const expenseData = {};
            
            filteredRecords.forEach(record => {
                if (record.type === 'income') {
                    incomeData[record.category] = (incomeData[record.category] || 0) + record.amount;
                } else {
                    expenseData[record.category] = (expenseData[record.category] || 0) + record.amount;
                }
            });
            
            // ì›í˜• ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            updatePieChart(charts.incomePie, incomeData);
            updatePieChart(charts.expensePie, expenseData);
            
            // ë§‰ëŒ€ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            updateBarChart(charts.incomeBar, incomeData);
            updateBarChart(charts.expenseBar, expenseData);
        }
        
        // ì›í˜• ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function updatePieChart(chart, data) {
            const labels = Object.keys(data);
            const values = Object.values(data);
            
            chart.data.labels = labels;
            chart.data.datasets[0].data = values;
            chart.update('active');
        }
        
        // ë§‰ëŒ€ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function updateBarChart(chart, data) {
            const sorted = Object.entries(data).sort((a, b) => b[1] - a[1]);
            const labels = sorted.map(item => item[0]);
            const values = sorted.map(item => item[1]);
            
            chart.data.labels = labels;
            chart.data.datasets[0].data = values;
            chart.update('active');
        }
        
        // ê¸°ê°„ë³„ ë ˆì½”ë“œ í•„í„°ë§
        function filterRecordsByPeriod(records, period) {
            const now = new Date();
            const startDate = new Date();
            
            switch(period) {
                case 'weekly':
                    startDate.setDate(now.getDate() - 7);
                    break;
                case 'monthly':
                    startDate.setMonth(now.getMonth() - 1);
                    break;
                case 'yearly':
                    startDate.setFullYear(now.getFullYear() - 1);
                    break;
            }
            
            return records.filter(record => new Date(record.date) >= startDate);
        }
        
        // ìº˜ë¦°ë” ì—…ë°ì´íŠ¸
        function updateCalendar() {
            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();
            
            document.getElementById('currentMonth').textContent = 
                `${year}ë…„ ${month + 1}ì›”`;
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            
            // ìš”ì¼ í—¤ë”
            const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            dayNames.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-header';
                header.textContent = day;
                calendar.appendChild(header);
            });
            
            // ë¹ˆ ì¹¸ ì±„ìš°ê¸°
            for (let i = 0; i < firstDay; i++) {
                calendar.appendChild(document.createElement('div'));
            }
            
            // ë‚ ì§œë³„ ë°ì´í„° ì§‘ê³„
            const dailyData = {};
            data.records.forEach(record => {
                const date = new Date(record.date);
                if (date.getFullYear() === year && date.getMonth() === month) {
                    const day = date.getDate();
                    if (!dailyData[day]) {
                        dailyData[day] = { income: 0, expense: 0 };
                    }
                    if (record.type === 'income') {
                        dailyData[day].income += record.amount;
                    } else {
                        dailyData[day].expense += record.amount;
                    }
                }
            });
            
            // ë‚ ì§œ ìƒì„±
            for (let day = 1; day <= daysInMonth; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                
                if (dailyData[day]) {
                    dayDiv.classList.add('has-data');
                    dayDiv.innerHTML = `
                        <div class="date">${day}</div>
                        ${dailyData[day].income > 0 ? `<div class="income">+${formatShortMeso(dailyData[day].income)}</div>` : ''}
                        ${dailyData[day].expense > 0 ? `<div class="expense">-${formatShortMeso(dailyData[day].expense)}</div>` : ''}
                    `;
                } else {
                    dayDiv.innerHTML = `<div class="date">${day}</div>`;
                }
                
                dayDiv.onclick = () => showDayDetails(year, month, day);
                calendar.appendChild(dayDiv);
            }
        }
        
        // ì›” ë³€ê²½
        function changeMonth(delta) {
            currentMonth.setMonth(currentMonth.getMonth() + delta);
            updateCalendar();
            updateRecordsList();
        }
        
        // ë‚ ì§œ ìƒì„¸ ë³´ê¸°
        function showDayDetails(year, month, day) {
            const date = new Date(year, month, day);
            const dayRecords = data.records.filter(record => {
                const recordDate = new Date(record.date);
                return recordDate.getFullYear() === year &&
                       recordDate.getMonth() === month &&
                       recordDate.getDate() === day;
            });
            
            if (dayRecords.length === 0) return;
            
            // í•´ë‹¹ ë‚ ì§œë¡œ ìŠ¤í¬ë¡¤
            const dateStr = `${year}-${(month + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
            const element = document.getElementById(`day-${dateStr}`);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                element.style.background = '#fffacd';
                setTimeout(() => {
                    element.style.background = '';
                }, 2000);
            }
        }
        
        // ê¸°ë¡ ëª©ë¡ ì—…ë°ì´íŠ¸
        function updateRecordsList() {
            const recordsList = document.getElementById('recordsList');
            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();
            
            // í˜„ì¬ ì›”ì˜ ê¸°ë¡ë§Œ í•„í„°ë§
            const monthlyRecords = data.records.filter(record => {
                const date = new Date(record.date);
                return date.getFullYear() === year && date.getMonth() === month;
            });
            
            if (monthlyRecords.length === 0) {
                recordsList.innerHTML = '<p style="text-align: center; color: #999;">ì´ ë‹¬ì—ëŠ” ë“±ë¡ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            // ë‚ ì§œë³„ë¡œ ê·¸ë£¹í™”
            const groupedRecords = {};
            monthlyRecords.forEach(record => {
                const date = new Date(record.date);
                const dateKey = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`;
                
                if (!groupedRecords[dateKey]) {
                    groupedRecords[dateKey] = [];
                }
                groupedRecords[dateKey].push(record);
            });
            
            // HTML ìƒì„±
            let html = '';
            Object.keys(groupedRecords).sort().reverse().forEach(dateKey => {
                const dayRecords = groupedRecords[dateKey];
                const dayIncome = dayRecords.filter(r => r.type === 'income').reduce((sum, r) => sum + r.amount, 0);
                const dayExpense = dayRecords.filter(r => r.type === 'expense').reduce((sum, r) => sum + r.amount, 0);
                
                html += `
                    <div id="day-${dateKey}" class="day-record">
                        <h4>${dateKey}</h4>
                        <div style="margin-bottom: 10px; color: #666;">
                            ìˆ˜ìµ: <span style="color: #228B22;">${formatMeso(dayIncome)}</span> | 
                            ì§€ì¶œ: <span style="color: #DC143C;">${formatMeso(dayExpense)}</span> | 
                            ìˆœì´ìµ: <span style="color: #FF8C00;">${formatMeso(dayIncome - dayExpense)}</span>
                        </div>
                        ${dayRecords.sort((a, b) => new Date(b.date) - new Date(a.date)).map(record => {
                            const time = new Date(record.date);
                            const timeStr = `${time.getHours()}:${time.getMinutes().toString().padStart(2, '0')}`;
                            const color = record.type === 'income' ? '#228B22' : '#DC143C';
                            const prefix = record.type === 'income' ? '+' : '-';
                            
                            return `
                                <div class="record-item">
                                    <div>
                                        <span style="color: #666;">${timeStr}</span>
                                        <span style="margin-left: 10px;">${record.category}</span>
                                        ${record.memo ? `<span style="color: #999; margin-left: 10px;">${record.memo}</span>` : ''}
                                    </div>
                                    <span style="color: ${color}; font-weight: bold;">${prefix}${formatMeso(record.amount)}</span>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            });
            
            recordsList.innerHTML = html;
        }
        
        // ê¸ˆì•¡ í¬ë§· (ì „ì²´)
        function formatMeso(value) {
            if (value >= 100000000) {
                const billions = value / 100000000;
                return billions % 1 === 0 ? `${billions}ì–µ` : `${billions.toFixed(1)}ì–µ`;
            } else if (value >= 10000) {
                const tenThousands = Math.floor(value / 10000);
                return `${tenThousands.toLocaleString()}ë§Œ`;
            }
            return value.toLocaleString();
        }
        
        // ê¸ˆì•¡ í¬ë§· (ì§§ì€ ë²„ì „)
        function formatShortMeso(value) {
            if (value >= 100000000) {
                return `${(value / 100000000).toFixed(1)}ì–µ`;
            } else if (value >= 10000000) {
                return `${Math.floor(value / 10000000)}ì²œë§Œ`;
            } else if (value >= 10000) {
                return `${Math.floor(value / 10000)}ë§Œ`;
            }
            return value.toLocaleString();
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = init;
    </script>
    
    <!-- ì¶”ê°€ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="src/features/animations.js"></script>
    <script src="src/features/csv-export.js"></script>
    <script src="src/ui/notifications.js"></script>
    
    <script>
        // ì• ë‹ˆë©”ì´ì…˜ ì´ˆê¸°í™”
        window.addEventListener('DOMContentLoaded', function() {
            if (window.initAnimations) {
                window.initAnimations();
            }
        });
    </script>
</body>
</html>